<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://assets.squarewebsites.org/lazy-summaries/lazy-summaries.min.js"></script>

<script>
//Twitter Posts Gaps
  
  const twitMobileGap = 5; // <560px
  const twitTabletGap = 20; // from 560px to 1440px
  const twitDesctopGap = 40; // >1440px
</script>

<script>
  !function(){window.self===window.top||window.top.document.getElementById("lazy-summaries-admin")||function(e,t,s,i,a){if(s.querySelector("#"+t))i&&i(this);else{var n=document.createElement("script");n.src=e+"?cache="+((new Date).getTime()+"").substr(0,8),n.id=t,n.onload=function(){a&&this.remove(),i&&i(this)},s.appendChild(n)}}("https://assets.squarewebsites.org/lazy-summaries/lazy-summaries-admin.js","lazy-summaries-admin",window.top.document.getElementsByTagName("head")[0])}();
</script>


<script>
  //section name
  let isSection = document.querySelectorAll('.section-name');
  if (typeof(isSection) != 'undefined' && isSection != null){
    isSection.forEach(function(thisBlock){
      let sectionName = thisBlock.getAttribute('data-name');
      thisBlock.closest('section').classList.add(sectionName+'-section');
      thisBlock.closest('.sqs-block-code').style.display = 'none';
    });
  }
</script>

<!-- SCROLLING SUMMARY SECTION -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  let summaryScrollingSection = document.querySelector('.scrolling-summary-blocks-section');

  setTimeout(() => {
    if (typeof(summaryScrollingSection) !== 'undefined' && summaryScrollingSection !== null) {
      let summariesBlocks = summaryScrollingSection.querySelectorAll('.summary-v2-block');
      summariesBlocks.forEach((summaryBlock) => {
        let summaryContent = summaryBlock.querySelector('.summary-item-list');
        let copiedSummaryContent = summaryContent.innerHTML;

        let copiedSummaryContentBlock = document.createElement('div');
        copiedSummaryContentBlock.className = "summary-item-list-copied";
        copiedSummaryContentBlock.innerHTML = copiedSummaryContent;

        summaryContent.after(copiedSummaryContentBlock);

        const summaryItems = summaryBlock.querySelectorAll('.summary-item');
        summaryItems.forEach(item => {
          const summaryExcerpt = item.querySelector('.summary-excerpt');
          const summaryImageWrapper = item.querySelector('.img-wrapper');

          if (typeof(summaryExcerpt) !== 'undefined' && summaryExcerpt !== null) {
            const videoLinkSecond = summaryExcerpt.querySelector('a');

            if (videoLinkSecond && videoLinkSecond.innerText.trim().toUpperCase() === 'VIDEO') {
              const videoUrl = videoLinkSecond.getAttribute('href');
              const imgElement = summaryImageWrapper.querySelector('img');

              videoLinkSecond.style.display = 'none';

              const videoPlayer = createVideoPlayer(videoUrl, imgElement);
              summaryImageWrapper.appendChild(videoPlayer);
            } else {
              let imagesWithoutVideo = summaryImageWrapper.querySelector('img');
              let imagesDataSrc = imagesWithoutVideo.dataset.src;
              imagesWithoutVideo.src = imagesDataSrc;
            }
          }
        });
      });

      // Grab & Drag functionality
      const containers = document.querySelectorAll('.summary-item-list-container');
      containers.forEach(container => {
        let isDown = false;
        let startX;
        let scrollLeft;

        container.addEventListener('mousedown', (e) => {
          isDown = true;
          startX = e.pageX;
          scrollLeft = container.scrollLeft;
          container.style.cursor = 'grabbing';
        });

        container.addEventListener('mouseleave', () => {
          isDown = false;
          container.style.cursor = 'grab';
        });

        container.addEventListener('mouseup', () => {
          isDown = false;
          container.style.cursor = 'grab';
        });

        container.addEventListener('mousemove', (e) => {
          if (!isDown) return;
          e.preventDefault();
          const x = e.pageX;
          const walk = -(x - startX) * 2; // changed sign for direction change
          container.querySelectorAll('.summary-item-list, .summary-item-list-copied').forEach(item => {
            item.style.transition = 'none';
            item.style.transform = `translateX(${scrollLeft - walk}px)`; // changed sign for direction change
          });
        });

        container.addEventListener('mouseup', () => {
          isDown = false;
          container.style.cursor = 'grab';
          container.querySelectorAll('.summary-item-list, .summary-item-list-copied').forEach(item => {
            item.style.transition = 'transform 0.5s ease-in-out';
          });
        });
      });
    }
  }, 2000);
});

</script>
<!-- SCROLLING SUMMARY SECTION -->


<!-- Keito Image Changer Ghost -->
<script src="https://www.ghostplugins.dev/assets/keito/keito-7-1.js"></script>
<!-- Keito Image Changer Ghost -->

<!-- Super Grid 2.0 Ghost -->
<script src="https://www.ghostplugins.dev/assets/helpers/scroll-to/scroll-to.js" type="text/javascript"></script>

<script>
  var videoGalleryGlobalParam = {
    textAlignment: 'center' // left, center, or right available
  }
</script>

<script src="https://www.ghostplugins.dev/assets/video-gallery-grid/video-gallery-grid-7-1.js" type="text/javascript"></script>
<!-- Super Grid 2.0 Ghost -->

<!-- Phase Image Changer Ghost -->
<script src="https://www.ghostplugins.dev/assets/phase/phase-7-1.js"></script>
<!-- Phase Image Changer Ghost -->

<!-- Aiko Testimonial Slider Ghost -->
<script src="https://www.ghostplugins.dev/assets/helpers/swiper/swiper.js"></script>

<script>
  var globalGhostaikoParams = {
    autoplay: false, // true or false
    autoplayDelay: 8000 // slider timer
  }
</script>

<script src="https://www.ghostplugins.dev/assets/aiko/aiko-7-1.js"></script>
<!-- Aiko Testimonial Slider Ghost -->

<!-- Boldly Testimonial Slider Ghost -->
<script src="https://www.ghostplugins.dev/assets/helpers/swiper/swiper.js"></script>

<script>
  var globalGhostboldlyParams = {
    autoplay: true,
    autoplayDelay: 4000
  }
</script>

<script src="https://www.ghostplugins.dev/assets/boldly/boldly-7-1.js"></script>
<!-- Boldly Testimonial Slider Ghost -->

<!-- Kayto Summary Block Ghost -->
<script>
  var globalGhostkaytoParams = {
    itemsPerRow: 3 // available options: 1,2,3,4,5. Recommended: 3
  }
</script>

<script src="https://www.ghostplugins.dev/assets/kayto/kayto-7-1.js"></script>
<!-- Kayto Summary Block Ghost -->


<!-- BLOG SIDE PLUGIN -->
<script>
  var ghostBlogStyleAltLogo = '';
  // change the alt logo URL inside ['']. You can control size of the alt logo in custom CSS
  // how to host img within Squarespace -- https://www.katescott.co/blog/how-to-upload-files-to-squarespace
</script>


<script>
if (document.body.classList.contains('view-item') && !document.body.classList.contains('collection-66f523f15b5816791622da6a')){
  var isBlogItem = document.querySelector(".blog-item-wrapper");

  if (void 0 !== isBlogItem && null != isBlogItem) {
    ghostBlogStyleAltLogo && (document.querySelector(".header-title-logo").classList.add("alt-logo"), (document.querySelector(".header-title-logo a").style.backgroundImage = "url(" + ghostBlogStyleAltLogo + ")")),
      document.querySelector("body").classList.add("fifty-fifty-blog-item"),
      document.querySelector("header .header-display-desktop").insertAdjacentHTML("beforeend", '<a class="more-articles-menu-button">More Articles</a>');
    var d = document.head.querySelector("[property='og:image']").content,
        b = isBlogItem.querySelector(".blog-item-title"),
        e = b.innerText || b.textContent,
        f = isBlogItem.querySelector(".blog-item-meta-wrapper").innerHTML,
        g = document.querySelector(".item-pagination").innerHTML,
        c = window.location.href,
        h = c.substring(0, c.indexOf("?")),
        i =
        '<div class="blog-item-hero-banner"><div class="banner-image"><img src="' +
        d +
        '"></div><div class="blog-item-main-content"><div class="blog-item-title"><h1 class="blog-item-title-content">' +
        e +
        '</h1></div><div class="blog-item-meta-wrapper">' +
        f +
        '</div><div class="blog-item-pagination-wrapper">' +
        g +
        "</div></div> </div>";
    isBlogItem.insertAdjacentHTML("afterbegin", i);
    var a = new XMLHttpRequest();
    a.open("GET", "" + h + "?format=json-pretty", !0),
      (a.onload = function (b) {
      if (this.status >= 200 && this.status < 400) {
        var a = JSON.parse(this.response);
        document.querySelector(".blog-item-hero-banner img").setAttribute("src", a.item.assetUrl);
      }
    }),
      (a.onerror = function () {}),
      document.querySelector(".blog-item-hero-banner").classList.add("loaded");
  }
}
</script>
<!-- BLOG SIDE PLUGIN -->

<!--Swiper with pop-up-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"></script>
<link href="/s/plugin-lightbox-2.css" rel="stylesheet">
<script src="/s/plugin-lightbox-2.js"></script>
<script>pluginLightbox();</script>

<script>
let swiperPopUpsection = document.querySelector('.swiper-with-pop-up-section');

if (typeof(swiperPopUpsection) !== 'undefined' && swiperPopUpsection !== null) {
  
    let summaryWrapper = swiperPopUpsection.querySelector('.summary-item-list-container');
    summaryWrapper.classList.add("swiper");

    let summaryList = swiperPopUpsection.querySelector('.summary-item-list');
    summaryList.classList.add("swiper-wrapper");

    let summaryItems = swiperPopUpsection.querySelectorAll('.summary-item');
    summaryItems.forEach((summaryItem)=>{
      summaryItem.classList.add("swiper-slide");
    })
    
    let swiper = swiperPopUpsection.querySelector('.swiper');

    let mySwiper = new Swiper(swiper, {
      slidesPerView: 1.2,
      spaceBetween: 20,
      grabCursor: false,
      slidesOffsetBefore: 10,
      slidesOffsetAfter: 10,
      freeMode: true,
       mousewheel: true,
      breakpoints: {
        560: {
          slidesPerView: 2.2,
          spaceBetween: 20,
          slidesOffsetBefore: 20,
          slidesOffsetAfter: 20,
        },
        980: {
          slidesPerView: 3.2,
          spaceBetween: 20,
           slidesOffsetBefore: 20,
          slidesOffsetAfter: 20,
        },
        1440: {
          slidesPerView: 4.2,
          spaceBetween: 20,
           slidesOffsetBefore: 20,
          slidesOffsetAfter: 20,
        }
      },
       navigation: {
         nextEl: '.swiper-popup-right-arrow',
         prevEl: '.swiper-popup-left-arrow',
       },
    });

    if (mySwiper.initialized) {
      console.log('Swiper initialized  succussfully');
    } else {
      console.log('Error during initialization');
    }

}

</script>


<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Select the "Experiences" link by its unique class or ID
    var servicesLink = document.querySelector('a[href="/experiences-1"]');
    
    // Check if the link exists
    if (servicesLink) {
      // Add click event listener
      servicesLink.addEventListener('click', function(event) {
        event.preventDefault();
        
        // Redirect to /services instead
        window.location.href = '/experiences';
      });
    }
  });
</script>

<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<script>
//Twitters Slider
    const twittersSwiper = document.querySelector('.swiper-twitters')
  if(twittersSwiper){
    const swiperTwit = new Swiper('.swiper-twitters', {
    loop: false,
    spaceBetween: twitMobileGap,
    slidesPerView: 1,
    grabCursor: false,
      slidesOffsetBefore: 0,
      slidesOffsetAfter: 0,
    
      breakpoints: {
        560: {
          slidesPerView: 'auto',
          spaceBetween: twitTabletGap,
          slidesOffsetBefore: 10,
          slidesOffsetAfter: 10,
        },
        1440: {
          slidesPerView: 'auto',
          spaceBetween: twitDesctopGap,
          slidesOffsetBefore: 10,
          slidesOffsetAfter: 10,
        }
      },
    
    navigation: {
      nextEl: '.swiper-twitters-right-arrow',
      prevEl: '.swiper-twitters-left-arrow',
    },
  });

  window.addEventListener('load', () => {
    if (typeof twttr !== "undefined") {
      twttr.widgets.load();
    }
  });
  }
</script>

<script>
      jQuery(function ($) {
        const $cards = $(".card");

        // Set initial transform properties
        gsap.set($cards, {
          transformStyle: "preserve-3d",
        });

        // Original animation for card arrangement
        const cards = document.querySelectorAll(".card");

        gsap.set(cards, {
          xPercent: -50,
          yPercent: 0,
          left: "50%",
          top: "0%",
          position: "absolute",
        });

        gsap.to(cards, {
          duration: 1.5,
          x: (index) => {
            const column = index % 3;
            return (column - 1) * (376 + 20);
          },
          y: (index) => {
            const row = Math.floor(index / 3);
            return row * (502 + 20);
          },
          ease: "power2.out",
          stagger: 0.2,
          onComplete: () => {
            const columns = [
              [cards[0], cards[3]],
              [cards[1], cards[4]],
              [cards[2], cards[5]],
            ];

            const animations = [];

            [columns[0], columns[2]].forEach((columnCards) => {
              animations.push(
                gsap.to(columnCards, {
                  y: "-=1044",
                  duration: 3,
                  ease: "linear",
                })
              );
            });

            animations.push(
              gsap.to(columns[1], {
                y: "+=1044",
                duration: 3,
                ease: "linear",
              })
            );

            // After animations, return cards to grid positions
            Promise.all(animations.map((a) => a.play().then())).then(() => {
              gsap.to(cards, {
                duration: 1,
                y: (index) => Math.floor(index / 3) * (502 + 20),
                ease: "power2.out",
                onComplete: addTiltEffect, // Add tilt effect handlers here
              });
            });
          },
        });

        // Function to add the tilt effect handlers
        function addTiltEffect() {
          $cards.each(function () {
            const $card = $(this);

            $card.on("mousemove", function (e) {
              const rect = $card[0].getBoundingClientRect();
              const offsetX = e.clientX - rect.left; // X coordinate within card
              const offsetY = e.clientY - rect.top; // Y coordinate within card
              const centerX = rect.width / 2;
              const centerY = rect.height / 2;

              // Calculate rotation based on cursor position
              const rotationX = ((centerY - offsetY) / centerY) * 10; // 10 is the max rotation
              const rotationY = ((offsetX - centerX) / centerX) * 10;

              gsap.to($card, {
                duration: 0.3,
                rotationX: rotationX,
                rotationY: rotationY,
                transformPerspective: 1000,
                transformOrigin: "center center",
              });
            });

            // Reset tilt on mouse leave
            $card.on("mouseleave", function () {
              gsap.to($card, {
                duration: 0.3,
                rotationX: 0,
                rotationY: 0,
              });
            });
          });
        }
      });
    </script>



<script id="embla-carousel" type="text/javascript">
  console.log("Script started"); // Test if script is executing
function initializeEmblaAutoPlayCarousel(emblaElementSelector, sectionSelector, customOptions = {}, styleOptions = { paddingTop: "0", paddingBottom: "1.35rem" }) {
    // Default options
    const DEFAULT_OPTIONS = { loop: true, duration: 3000, autoplay: true, direction: "ltr" };
    
    // Merge default options with custom options
    const OPTIONS = { ...DEFAULT_OPTIONS, ...customOptions };

    // Create a <style> element to hold the CSS
    const style = document.createElement('style');
    style.textContent = `
        .embla {
            width: 100%;
            margin: auto;
			background: #020202;
        }
        .embla__viewport {
            overflow: hidden;
        }
        .embla__container {
            display: flex;
            touch-action: pan-y pinch-zoom;
            margin: 0 calc(1.31rem / 2);
        }
        .embla__slide {
            transform: translate3d(0, 0, 0);
            flex: 0 0 15.15rem;
            min-width: 10rem;
            padding-left: calc(1rem + 0.21625rem);
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            border-radius: 0.435rem;
            overflow: hidden;
        }
        .embla__slide .gallery-grid-item-wrapper {
			height: 8.65rem;
        }
    `;
    document.head.appendChild(style); // Append the style to the head

    // Create the main Embla container
    const emblaNode = document.createElement('section');
    emblaNode.classList.add('embla');
        emblaNode.style.paddingTop = styleOptions.paddingTop; 
        emblaNode.style.paddingBottom = styleOptions.paddingBottom; 

    // Create the viewport
    const viewportNode = document.createElement('div');
    viewportNode.classList.add('embla__viewport');
    emblaNode.appendChild(viewportNode);

    // Create the slides container
    const slidesContainer = document.createElement('div');
    slidesContainer.classList.add('embla__container');
  	slidesContainer.setAttribute("dir", OPTIONS.direction)
    viewportNode.appendChild(slidesContainer);

    // Query all elements that match the emblaElementSelector
    const elements = document.querySelectorAll(emblaElementSelector);

    // Create slides for each element
    elements.forEach(element => {
        const slideNode = document.createElement('div');
        slideNode.classList.add('embla__slide');

        // Apply styles to the slide
         // slideNode.style.width = styleOptions.width; // Default width
        //slideNode.style.height = styleOptions.height; // Default height
        //slideNode.style.marginRight = styleOptions.gap; // Apply gap between slides

        slideNode.appendChild(element.cloneNode(true)); // Clone the element into the slide
        slidesContainer.appendChild(slideNode); // Append slide to the slides container
    });

    // Find the section to be replaced
    const sectionNode = document.querySelector(sectionSelector);
    if (sectionNode) {
        // Replace the section with the new Embla carousel
        sectionNode.parentNode.insertBefore(emblaNode, sectionNode);
        sectionNode.parentNode.removeChild(sectionNode); // Remove the old section
    } else {
        console.error("Section not found for selector:", sectionSelector);
        return;
    }

    // Initialize Embla carousel
    const emblaApi = EmblaCarousel(viewportNode, OPTIONS, [
        EmblaCarouselAutoplay({ playOnInit: true, delay: 0 })
    ]);

    console.log("Embla initialized with viewport:", viewportNode);
    return emblaApi; // Return the emblaApi for further use if needed
}

// Example usage with styling options
const gallery1 = initializeEmblaAutoPlayCarousel(
    '.gallery .gallery-grid .gallery-grid-item',
    `.page-section[data-section-id="6794edeabbd7df15bd50caeb"]`,
    {}, // Custom options
    { paddingTop: "5.81rem", paddingBottom: "1.35rem" } // Style options
);
 	const gallery2 = initializeEmblaAutoPlayCarousel(
    '.gallery .gallery-grid .gallery-grid-item',
    `.page-section[data-section-id="67974892ee839c7328c50525"]`,
    {direction: "rtl" }, // Custom options
    { paddingTop: "0", paddingBottom: "1.35rem" } // Style options
);
  const gallery3 = initializeEmblaAutoPlayCarousel(
    '.gallery .gallery-grid .gallery-grid-item',
    `.page-section[data-section-id="67974899dfc7226051616f98"]`,
    {}, // Custom options
    { paddingTop: "0", paddingBottom: "0" } // Style options
);
console.log("result", gallery1);

</script>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Register ScrollTrigger plugin
    gsap.registerPlugin(ScrollTrigger);

    // Create the scroll-triggered animation
    gsap.fromTo(
      ".custom-special-heading",
      {
        opacity: 0,
        y: "-50vh",
        scale: 0.5,
      },
      {
        scrollTrigger: {
          trigger: ".custom-heading-container",
          start: "top center",
          end: "bottom center",
          toggleActions: "play reverse play reverse",
          markers: false,
          scrub: 2,
        },
        opacity: 1,
        y: "10vh",
        scale: 1,
        duration: 1,
        ease: "power1.out",
      }
    );
  });
</script>


    <script>
      document.addEventListener("DOMContentLoaded", function () {
        gsap.registerPlugin(ScrollTrigger);

        // Animate left column upward
        gsap.to(".column-left", {
          scrollTrigger: {
            trigger: ".columns-container",
            start: "top center",
            end: "bottom center",
            scrub: 1, // Reduced from 2 for faster response
            markers: false,
          },
          y: "-40vh", // Increased from -20vh for more movement
          ease: "none",
        });

        // Animate center column downward
        gsap.to(".column-center", {
          scrollTrigger: {
            trigger: ".columns-container",
            start: "top center",
            end: "bottom center",
            scrub: 1, // Reduced from 2 for faster response
            markers: false,
          },
          y: "40vh", // Increased from 20vh for more movement
          ease: "none",
        });

        // Animate right column upward
        gsap.to(".column-right", {
          scrollTrigger: {
            trigger: ".columns-container",
            start: "top center",
            end: "bottom center",
            scrub: 1, // Reduced from 2 for faster response
            markers: false,
          },
          y: "-40vh", // Increased from -20vh for more movement
          ease: "none",
        });
      });
    </script>